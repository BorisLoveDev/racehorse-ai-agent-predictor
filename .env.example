# ============================================
# Horse Racing Betting Agent - Configuration
# ============================================

# TabTouch Timezone (DO NOT CHANGE)
SOURCE_TIMEZONE=Australia/Perth

# Your Local Timezone
CLIENT_TIMEZONE=Asia/Kuala_Lumpur

# ============================================
# API Keys (REQUIRED)
# ============================================

# OpenRouter API Key (for Gemini and Grok models)
# Get your key at: https://openrouter.ai/
RACEHORSE_API_KEYS__OPENROUTER_API_KEY=sk-or-v1-...

# Telegram Bot Token
# Create bot via @BotFather on Telegram
RACEHORSE_API_KEYS__TELEGRAM_BOT_TOKEN=123456:ABC-DEF...

# Telegram Chat ID
# Get your chat ID from @userinfobot
RACEHORSE_API_KEYS__TELEGRAM_CHAT_ID=-100...

# ============================================
# Timing Configuration
# ============================================

# Trigger analysis N minutes before race starts
RACEHORSE_TIMING__MINUTES_BEFORE_RACE=3

# Wait N minutes after race for results
RACEHORSE_TIMING__RESULT_WAIT_MINUTES=15

# Max retries for fetching results
RACEHORSE_TIMING__RESULT_MAX_RETRIES=5

# Seconds between result retries
RACEHORSE_TIMING__RESULT_RETRY_INTERVAL=180

# Seconds between monitoring checks
RACEHORSE_TIMING__MONITOR_POLL_INTERVAL=60

# ============================================
# Betting Configuration
# ============================================

# Default bet amount per race (virtual, for tracking)
RACEHORSE_BETTING__DEFAULT_BET_AMOUNT=100.0

# Minimum confidence score to place bets (0-1)
RACEHORSE_BETTING__MIN_CONFIDENCE_TO_BET=0.5

# Maximum bet amount per race
RACEHORSE_BETTING__MAX_BET_AMOUNT=500.0

# Enable exotic bets (Exacta, Trifecta, etc.)
RACEHORSE_BETTING__ENABLE_EXOTIC_BETS=true

# ============================================
# Agent Configuration (Optimized per Analysis)
# ============================================
# Settings based on multi-model optimization analysis:
# - Use reasoning.effort levels instead of raw max_tokens
# - Cap max_tokens for latency/cost control (~2 min target)
# - Disable web_search for betting agents (research gathers data)

# Gemini Betting Agent (Context: 1M, Cost: ~$3/M output)
# High reasoning (~80% = 8K thinking tokens) for rigorous analysis
RACEHORSE_AGENTS__GEMINI__MODEL_ID=google/gemini-3-flash-preview
RACEHORSE_AGENTS__GEMINI__REASONING_EFFORT=high
RACEHORSE_AGENTS__GEMINI__TEMPERATURE=0.7
RACEHORSE_AGENTS__GEMINI__MAX_TOKENS=10000
RACEHORSE_AGENTS__GEMINI__ENABLE_WEB_SEARCH=false

# Grok Betting Agent (Context: 2M, Cost: ~$0.50/M output - cheap!)
# High reasoning (~80% = 9.6K thinking tokens) for creative insight
RACEHORSE_AGENTS__GROK__MODEL_ID=x-ai/grok-4.1-fast
RACEHORSE_AGENTS__GROK__REASONING_EFFORT=high
RACEHORSE_AGENTS__GROK__TEMPERATURE=0.7
RACEHORSE_AGENTS__GROK__MAX_TOKENS=12000
RACEHORSE_AGENTS__GROK__ENABLE_WEB_SEARCH=false

# Run both agents in parallel for dual perspective
RACEHORSE_AGENTS__PARALLEL_EXECUTION=true

# Research Agent (runs first, gathers data for betting agents)
# Medium reasoning (~50%) for fact-finding, low temp for accuracy
RACEHORSE_AGENTS__RESEARCH__MODEL_ID=google/gemini-3-flash-preview
RACEHORSE_AGENTS__RESEARCH__REASONING_EFFORT=medium
RACEHORSE_AGENTS__RESEARCH__TEMPERATURE=0.3
RACEHORSE_AGENTS__RESEARCH__MAX_TOKENS=2000
RACEHORSE_AGENTS__RESEARCH__ENABLED=true
RACEHORSE_AGENTS__RESEARCH__TOP_HORSES_TO_RESEARCH=5
RACEHORSE_AGENTS__RESEARCH__INCLUDE_JOCKEYS=true
RACEHORSE_AGENTS__RESEARCH__INCLUDE_TRAINERS=true

# ============================================
# Redis Configuration
# ============================================

# For local development
RACEHORSE_REDIS__HOST=localhost
RACEHORSE_REDIS__PORT=6379
RACEHORSE_REDIS__DB=0
RACEHORSE_REDIS__PASSWORD=

# ============================================
# Database Configuration
# ============================================

# For local development
RACEHORSE_DATABASE__PATH=races.db
# For Docker (set automatically in docker-compose.yml)
# RACEHORSE_DATABASE__PATH=/app/data/races.db

# ============================================
# Web Search Configuration (SearXNG)
# ============================================

# Search engine: "searxng" (recommended) or "duckduckgo"
RACEHORSE_WEB_SEARCH__ENGINE=searxng

# SearXNG URL (for Docker use http://searxng:8080)
RACEHORSE_WEB_SEARCH__SEARXNG_URL=http://localhost:8080

# Search mode: "off", "raw" (snippets only), "lite" (LLM extracts), "deep" (full research)
RACEHORSE_WEB_SEARCH__MODE=lite

# Enable/disable web search
RACEHORSE_WEB_SEARCH__ENABLED=true

# Maximum results per search query
RACEHORSE_WEB_SEARCH__MAX_RESULTS_PER_QUERY=3

# Maximum total queries per race analysis
RACEHORSE_WEB_SEARCH__MAX_QUERIES_PER_RACE=10

# Maximum sites to visit in deep mode
RACEHORSE_WEB_SEARCH__DEEP_MODE_MAX_SITES=3

# Enable caching of search results
RACEHORSE_WEB_SEARCH__ENABLE_CACHE=true

# Cache TTL in seconds (5 minutes default)
RACEHORSE_WEB_SEARCH__CACHE_TTL_SECONDS=300

# ============================================
# Logging
# ============================================

RACEHORSE_LOG_LEVEL=INFO
